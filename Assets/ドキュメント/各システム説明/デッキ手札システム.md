# クラス説明

- CardTemplate
    - ScriptableObjectとして扱う
    - カードそれ自体の性能データについて責任を持つ
    - CardTypeを示すCardTypeプロパティを持つ。ユニット、トーテム、スペルの3種類を定義する
    - PlayCostを示すintプロパティを持つ。プレイに必要なMPコストを保持する
    - UnitDataを示すUnitDataプロパティを持つ。カードタイプがユニットの場合、プレイ時に登場するユニットの性能を保持する
    - TotemDataを示すTotemDataプロパティを持つ。カードタイプがトーテムの場合、プレイ時に登場するトーテムの性能を保持する
    - SpellEffectを示すSpellEffectプロパティを持つ。カードタイプがスペルの場合、プレイ時に得る効果を保持する

- CardType
    - enumクラス
    - カードタイプを定義する
    - Unit、Totem、Spellの値を保持する

- DeckRecipe
    - ScriptableObjectとして扱う
    - 各プレイヤーのデッキの元になるカード情報について責任を持つ
    - Entriesを示すList<DeckRecipeEntry>プロパティを持つ。カードテンプレートとその枚数のペアを複数保持する

- DeckRecipeEntry
    - Monobehaviorを継承しない
    - デッキレシピの1エントリについて責任を持つ
    - Templateを示すCardTemplateプロパティを持つ
    - Countを示すintプロパティを持つ。そのカードをデッキに入れる枚数を保持する

- Card
    - Monobehaviorを継承しない
    - 実際にデッキや手札を行き来するカードのデータについて責任を持つ
    - CardIDを示すintプロパティを持つ。カードを一意に識別するIDを保持する
    - Templateを示すCardTemplateプロパティを持つ。カードの元となるテンプレートを参照する
    - AvailableActionsを示すListプロパティを持つ。このカードが取りうる行動のリストを保持する

- Deck
    - Monobehaviorを継承しない
    - 各プレイヤーが保持するカードの束について責任を持つ
    - Cardsを示すList<Card>プロパティを持つ。順序付きでカードの配列を保持する

- DeckBuilder
    - Monobehaviorを継承しない
    - デッキの構築について責任を持つ
    - BuildDeck (DeckRecipe recipe): デッキレシピを受け取り、Deckを返す。デッキはカード1枚ずつが区別され順序付きになる

# 処理シーケンス

## デッキレシピからデッキを作成する処理シーケンス

1. 構築リクエスト（ゲームフロー管理 → DeckBuilder）
    - DeckRecipeが渡される
    - BuildDeck(recipe)が呼ばれる

2. エントリの巡回（DeckBuilder）
    - DeckRecipeのEntriesを順に巡回する
    - 各エントリについてTemplateとCountを取得する

3. カードの生成（DeckBuilder）
    - 各TemplateについてCount枚分のCardインスタンスを生成する
    - 各Cardには固有のIDを割り当て、同一テンプレートから生成されたカードでも区別できるようにする

4. デッキの組み立て（DeckBuilder）
    - 生成した全Cardを順序付きのListとしてまとめる
    - Deckインスタンスを作成し、CardのListを設定する

5. シャッフル（DeckBuilderまたは呼び出し元）
    - デッキの順序をランダムに並べ替える
    - 構築されたDeckを返す

## カードを引く処理シーケンス

1. ドローリクエスト（ゲームフロー管理 → PlayerManager）
    - プレイヤーIDが渡される
    - デッキの一番上からカードを手札に加える操作が要求される

2. デッキの確認（PlayerManager）
    - 該当プレイヤーのデッキにカードが存在するか確認する
    - カードが存在しない場合、敗北処理へ遷移する

3. カードの取得（PlayerManager）
    - デッキの先頭要素を取得する
    - デッキからそのカードを削除する

4. 手札への追加（PlayerManager）
    - 取得したカードを手札に加える
    - 手札は順序なしのため、追加位置の指定は不要である
